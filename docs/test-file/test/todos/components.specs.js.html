<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">test/todos/components.specs.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <a data-ice="repoURL" href="https://github.com/Freezystem/redux-app.git" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-initialState">initialState</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rootReducer">rootReducer</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">modules/main</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-HomePage">HomePage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MainApp">MainApp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Menu">Menu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NotFound">NotFound</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-ReactDOM">ReactDOM</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://developer.mozilla.org/en-US/docs/Glossary/XML">XML</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">modules/todos</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-FilterLink">FilterLink</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Todo">Todo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TodoApp">TodoApp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TodoFilterLinks">TodoFilterLinks</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TodoFooter">TodoFooter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TodoForm">TodoForm</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TodoList">TodoList</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">modules/todos/reducers</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-SET_TODO_FILTER">SET_TODO_FILTER</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-getFilteredTodos">getFilteredTodos</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-setTodoFilter">setTodoFilter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-todoFilter">todoFilter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-todoFilters">todoFilters</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ADD_TODO">ADD_TODO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CLEAR_TODO">CLEAR_TODO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-REMOVE_TODO">REMOVE_TODO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TOGGLE_TODO">TOGGLE_TODO</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addTodo">addTodo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-clearTodo">clearTodo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-removeTodo">removeTodo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-todos">todos</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-toggleTodo">toggleTodo</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-todoObj">todoObj</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">test/todos/components.specs.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">&apos;use strict&apos;;

import React        from &apos;react&apos;;
import expect       from &apos;expect&apos;;
import { mount }    from &apos;enzyme&apos;;

import {
  Todo,
  TodoList,
  TodoForm,
  TodoFooter,
  FilterLink,
  TodoFilterLinks
}                   from &apos;../../app/modules/todos/TodoApp.component&apos;;

import {
  todoFilters
}                   from &apos;../../app/modules/todos/reducers/todoFilter.reducer&apos;;

/** @test */
describe(&apos;components&apos;, () =&gt; {

  /** @test {Todo} */
  describe(&apos;&lt;Todo /&gt;&apos;, () =&gt; {
    let attrs = {},
      wrapper = null;

    beforeEach(() =&gt; {
      attrs = {
        completed      : true,
        label          : &apos;todo&apos;,
        id             : 42,
        onClick        : expect.createSpy(),
        onButtonClick  : expect.createSpy()
      };

      wrapper = mount(&lt;Todo {...attrs} /&gt;);
    });

    it(&apos;should render a todo&apos;, () =&gt; {
      expect(wrapper.find(&apos;.todoList_itemLabel&apos;).text()).toBe(&apos;todo&apos;);
      expect(wrapper.find(&apos;.todoList_itemButton&apos;).text()).toExist();
    });

    it(&apos;should call onClick() when label is clicked&apos;, () =&gt; {
      wrapper.find(&apos;.todoList_itemLabel&apos;).simulate(&apos;click&apos;);

      expect(attrs.onClick.calls.length).toBe(1);
    });

    it(&apos;should call onButtonClick() when button is clicked&apos;, () =&gt; {
      wrapper.find(&apos;.todoList_itemButton&apos;).simulate(&apos;click&apos;);

      expect(attrs.onButtonClick.calls.length).toBe(1);
    });
  });

  /** @test {TodoList} */
  describe(&apos;&lt;TodoList /&gt;&apos;, () =&gt; {
    let attrs = {},
      wrapper = null;

    beforeEach(() =&gt; {
      attrs = {
        filteredTodos       : [
          {label: &apos;todo1&apos;, id: 111, completed: false},
          {label: &apos;todo2&apos;, id: 222, completed: false},
          {label: &apos;todo3&apos;, id: 333, completed: true},
        ],
        onTodoClick         : expect.createSpy(),
        onTodoButtonClick   : expect.createSpy()
      };

      wrapper = mount(&lt;TodoList {...attrs} /&gt;);
    });

    it(&apos;should render filtered todos&apos;, () =&gt; {
      const firstTodo = wrapper.find(Todo).at(0);
      const secondTodo = wrapper.find(Todo).at(1);
      const thirdTodo = wrapper.find(Todo).at(2);

      expect(wrapper.find(&apos;.todoList&apos;).children().length).toBe(3);

      expect(firstTodo.key()).toBe(&apos;111&apos;);
      expect(secondTodo.key()).toBe(&apos;222&apos;);
      expect(thirdTodo.key()).toBe(&apos;333&apos;);

      expect(firstTodo.find(&apos;.todoList_itemLabel&apos;).text()).toBe(&apos;todo1&apos;);
      expect(secondTodo.find(&apos;.todoList_itemLabel&apos;).text()).toBe(&apos;todo2&apos;);
      expect(thirdTodo.find(&apos;.todoList_itemLabel&apos;).text()).toBe(&apos;todo3&apos;);
    });
  });

  /** @test {TodoForm} */
  describe(&apos;&lt;TodoForm /&gt;&apos;, () =&gt; {
    let attrs = {},
      wrapper = null;

    beforeEach(() =&gt; {
      attrs = {
        onTodoFormSubmit : expect.createSpy()
      };

      wrapper = mount(&lt;TodoForm {...attrs} /&gt;);
    });

    it(&apos;should render a form to add a todo&apos;, () =&gt; {
      const form    = wrapper.find(&apos;.todoForm&apos;);
      const input   = form.find(&apos;.todoForm_label&apos;);
      const button  = form.find(&apos;.todoForm_submit&apos;);

      expect(form.type()).toBe(&apos;form&apos;);
      expect(form.props().onSubmit).toBeA(&apos;function&apos;);

      expect(input.length).toBe(1);
      expect(input.type()).toBe(&apos;input&apos;);
      expect(input.props().type).toBe(&apos;text&apos;);

      expect(button.length).toBe(1);
      expect(button.type()).toBe(&apos;button&apos;);
    });

    it(&apos;should not submit form with an empty label&apos;, () =&gt; {
      const form    = wrapper.find(&apos;.todoForm&apos;);

      form.simulate(&apos;submit&apos;);

      expect(attrs.onTodoFormSubmit).toNotHaveBeenCalled();
    });

    it(&apos;should submit form when a label is given&apos;, () =&gt; {
      wrapper.find(&apos;.todoForm_label&apos;).get(0).value = &apos;write test&apos;;
      wrapper.find(&apos;.todoForm&apos;).simulate(&apos;submit&apos;);

      expect(attrs.onTodoFormSubmit).toHaveBeenCalledWith(&apos;write test&apos;);
    });
  });

  /** @test {FilterLink} */
  describe(&apos;&lt;FilterLink /&gt;&apos;, () =&gt; {
    let attrs = {},
    wrapper = null;

    beforeEach(() =&gt; {
      attrs = {
        active  : false,
        filter  : todoFilters.SHOW_ALL,
        onClick : expect.createSpy()
      };

      wrapper = mount(&lt;FilterLink {...attrs} /&gt;);
    });

    it(&apos;should generate a clickable link to filter todos&apos;, () =&gt; {
      const link  = wrapper.find(&apos;.filterList_item&apos;).first();

      expect(link.props().href).toBe(`#${todoFilters.SHOW_ALL}`);
      expect(link.hasClass(&apos;filterList_item-active&apos;)).toBeFalsy();

      link.simulate(&apos;click&apos;);

      expect(attrs.onClick).toHaveBeenCalledWith(todoFilters.SHOW_ALL);
    });

    it(&apos;should not be clickable if filter is already active&apos;, () =&gt; {
      wrapper.setProps({ active : true });
      const link  = wrapper.find(&apos;.filterList_item&apos;).first();

      expect(link.props().href).toBe(`#${todoFilters.SHOW_ALL}`);
      expect(link.hasClass(&apos;filterList_item-active&apos;)).toBeTruthy();

      link.simulate(&apos;click&apos;);

      expect(attrs.onClick).toNotHaveBeenCalled();
    });

    it(&apos;should display the filter name properly&apos;, () =&gt; {
      const link = wrapper.find(&apos;.filterList_item&apos;).first();

      expect(link.text()).toBe(&apos;ALL&apos;);
    });
  });

  /** @test {TodoFilterLinks} */
  describe(&apos;&lt;TodoFilterLinks /&gt;&apos;, () =&gt; {
    let attrs = {},
      wrapper = null;

    beforeEach(() =&gt; {
      attrs = {
        filterList    : Object.keys(todoFilters),
        currentFilter : todoFilters.SHOW_ALL,
        onLinkClick   : expect.createSpy()
      };

      wrapper = mount(&lt;TodoFilterLinks {...attrs} /&gt;);
    });

    it(&apos;should render all filter links&apos;, () =&gt; {
      expect(wrapper.find(&apos;.filterList_item&apos;).length).toBe(attrs.filterList.length);
    });

    it(&apos;should set proper filter as active&apos;, () =&gt; {
      expect(wrapper.find(&apos;.filterList_item-active&apos;).length).toBe(1);
      expect(wrapper.find(&apos;.filterList_item&apos;).not(&apos;.filterList_item-active&apos;).length).toBe(attrs.filterList.length - 1);
      expect(wrapper.find(&apos;.filterList_item-active&apos;).text()).toBe(&apos;ALL&apos;);
    });

    it(&apos;should pass a fonction as onClick property&apos;, () =&gt; {
      wrapper.find(&apos;.filterList_item&apos;).not(&apos;.filterList_item-active&apos;).first().simulate(&apos;click&apos;);

      expect(attrs.onLinkClick).toHaveBeenCalled();
    });
  });

  /** @test {TodoFooter} */
  describe(&apos;&lt;TodoFooter /&gt;&apos;, () =&gt; {
    let attrs = {},
      wrapper = null;

    beforeEach(() =&gt; {
      attrs = {
        todos : [
          {label: &apos;todo1&apos;, id: 111, completed: false},
          {label: &apos;todo2&apos;, id: 222, completed: true},
          {label: &apos;todo3&apos;, id: 333, completed: false},
        ],
        onTodoClearClick : expect.createSpy()
      };

      wrapper = mount(&lt;TodoFooter {...attrs} /&gt;);
    });

    it(&apos;should not display clear link if there isn\&apos;t completed todo&apos;, () =&gt; {
      wrapper.setProps({
        todos : [
          {label: &apos;todo1&apos;, id: 111, completed: false},
          {label: &apos;todo2&apos;, id: 222, completed: false},
          {label: &apos;todo3&apos;, id: 333, completed: false},
        ]
      });

      expect(wrapper.find(&apos;.todoFooter_clear&apos;).hasClass(&apos;todoFooter_clear-hide&apos;)).toBeTruthy();
    });

    it(&apos;should display clear link if there is completed todo&apos;, () =&gt; {
      expect(wrapper.find(&apos;.todoFooter_clear&apos;).hasClass(&apos;todoFooter_clear-hide&apos;)).toBeFalsy();
    });

    it(&apos;should call onTodoClearClick on clear link click&apos;, () =&gt; {
      wrapper.find(&apos;.todoFooter_clear&apos;).first().simulate(&apos;click&apos;);

      expect(attrs.onTodoClearClick).toHaveBeenCalled();
    });
  });
});</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
